/* ============================================
   FOGSIFT MOBILE STYLES - 70's/80's RETRO
   Mobile-first responsive overrides
   ============================================ */

/* ============================================
   GLOBAL OVERFLOW PROTECTION
   Prevents content from breaking out of viewport
   ============================================ */

/* Prevent horizontal scroll on entire page */
html, body {
    overflow-x: hidden;
    max-width: 100vw;
}

/* Ensure all elements respect container bounds */
*, *::before, *::after {
    box-sizing: border-box;
}

/* Images and media respect container */
img, video, iframe, embed, object {
    max-width: 100%;
    height: auto;
}

/* Prevent long text from breaking layout */
h1, h2, h3, h4, h5, h6, p, li, td, th, label, span {
    overflow-wrap: break-word;
    word-wrap: break-word;
    hyphens: auto;
}

/* Code blocks scroll horizontally instead of breaking */
pre, code {
    overflow-x: auto;
    max-width: 100%;
}

/* === MOBILE BREAKPOINT: 768px and below === */
@media (max-width: 768px) {

    /* === HIDE SCROLLBAR ON MOBILE === */
    html, body {
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
    }
    
    html::-webkit-scrollbar,
    body::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Opera */
    }

    /* === TOUCH TARGETS (WCAG 2.1: 44x44px min) === */
    .cta-button,
    .menu-toggle,
    .theme-toggle,
    button,
    [role="button"] {
        min-height: 44px;
        min-width: 44px;
        box-sizing: border-box;
    }

    /* === TYPOGRAPHY MOBILE SCALE === */
    :root {
        --text-hero: clamp(2rem, 8vw, 3rem);
        --text-section: clamp(1.5rem, 6vw, 2rem);
    }

    .headline {
        font-size: var(--text-hero);
        line-height: 1.1;
    }

    /* === SPACING MOBILE SCALE === */
    section,
    .section {
        padding: var(--space-lg) var(--space-md);
        margin-bottom: var(--space-lg);
    }

    /* === NAVIGATION === */
    .main-nav {
        padding: var(--space-sm) var(--space-md);
    }

    .brand-logo {
        height: 36px;
    }

    /* Theme picker visible on mobile */
    .nav-controls .theme-picker {
        display: inline-flex;
    }

    /* Compact theme picker on mobile */
    .theme-picker-toggle {
        padding: 6px 10px;
        min-height: 36px;
    }

    .theme-picker-label {
        display: none;
    }

    /* === MENU OVERFLOW PROTECTION === */
    .theme-picker {
        position: relative;
    }

    .theme-picker-menu {
        min-width: 140px;
        max-width: calc(100vw - 20px); /* Never wider than viewport minus padding */
        max-height: 70vh; /* Don't take more than 70% of viewport height */
        right: 0;
        left: auto;
    }

    /* Mobile nav menu stays within bounds */
    .mobile-nav {
        max-width: 100vw;
        max-height: 100vh;
        overflow-y: auto;
        overflow-x: hidden;
    }

    /* All buttons stay within container */
    button, .btn, .cta-button, .pricing-cta {
        max-width: 100%;
        white-space: normal; /* Allow text to wrap if needed */
    }

    /* === HERO === */
    .section-hero {
        padding: var(--space-lg) 0;
    }

    .hero-badge {
        padding: var(--space-lg);
    }

    .hero-badge .cta-button {
        width: 100%;
        text-align: center;
        justify-content: center;
    }

    /* === PROCESS === */
    .process-steps {
        grid-template-columns: 1fr;
        gap: var(--space-md);
    }

    .process-step {
        padding: var(--space-md);
    }

    /* === ABOUT === */
    .about-card {
        padding: var(--space-lg);
    }

    .about-avatar img {
        width: 100px;
        height: 100px;
    }

    /* === TESTIMONIALS === */
    .testimonials-grid {
        grid-template-columns: 1fr;
        gap: var(--space-md);
    }

    .testimonial-card {
        padding: var(--space-md);
    }

    .testimonial-quote {
        font-size: var(--text-sm);
    }

    .testimonials-stats {
        gap: var(--space-lg);
    }

    .stat-number {
        font-size: var(--text-xl);
    }

    /* === PRICING === */
    .pricing-cards {
        grid-template-columns: 1fr;
        gap: var(--space-md);
    }

    .pricing-card {
        padding: var(--space-md);
    }

    /* === CONTACT === */
    .section-contact {
        padding: var(--space-lg);
    }

    .section-contact .cta-button {
        width: 100%;
        max-width: 280px;
    }

    /* === FOOTER === */
    .footer-links {
        flex-direction: column;
        gap: var(--space-sm);
    }

    .footer-bottom {
        flex-direction: column;
        gap: var(--space-xs);
    }

    .footer-sep {
        display: none;
    }

    /* === SECTION DIVIDERS === */
    .section-divider {
        width: 80%;
        margin: var(--space-lg) auto;
    }

    /* === MODAL MOBILE === */
    .modal-content {
        width: 100%;
        max-width: none;
        height: 100%;
        max-height: none;
        border-radius: 0;
        margin: 0;
    }

    .close-modal {
        width: 44px;
        height: 44px;
    }
}

/* === SMALL MOBILE: 375px and below === */
@media (max-width: 375px) {
    section,
    .section {
        padding: var(--space-md) var(--space-sm);
    }

    .headline {
        font-size: 1.75rem;
    }

    .cta-button {
        font-size: var(--text-sm);
        padding: 12px 16px;
    }

    .hero-badge,
    .about-card,
    .pricing-card,
    .process-step {
        padding: var(--space-md);
    }

    /* Extra small screen nav protection */
    .main-nav {
        padding: var(--space-xs) var(--space-sm);
    }

    .brand-logo {
        height: 28px;
        max-width: 100px;
    }

    /* Compact theme picker for tiny screens */
    .theme-picker-toggle {
        padding: 4px 8px;
        min-height: 32px;
        font-size: 0.875rem;
    }

    .theme-picker-menu {
        min-width: 120px;
        font-size: 0.875rem;
    }

    .theme-option-label {
        font-size: 0.75rem;
    }

    /* Stack nav controls if needed */
    .nav-controls {
        gap: 4px;
    }
}

/* === EXTRA SMALL: 320px and below === */
@media (max-width: 320px) {
    /* Absolute minimum sizes for tiny screens */
    .headline {
        font-size: 1.5rem;
    }

    section,
    .section {
        padding: var(--space-sm);
    }

    .cta-button {
        font-size: 0.75rem;
        padding: 10px 12px;
    }

    /* Hide non-essential decorative elements */
    .theme-option-icon {
        display: none;
    }

    /* Ensure logo doesn't overflow */
    .brand-logo {
        height: 24px;
        max-width: 80px;
    }
}

/* === TABLET: 769px to 1024px === */
@media (min-width: 769px) and (max-width: 1024px) {
    .process-steps {
        grid-template-columns: repeat(2, 1fr);
    }

    .testimonials-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    /* Center the third testimonial on tablet */
    .testimonial-card:nth-child(3) {
        grid-column: 1 / -1;
        max-width: 50%;
        margin: 0 auto;
    }

    .pricing-cards {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* ============================================
   THEME ANIMATIONS - MOBILE OPTIMIZATIONS
   Reduce heavy effects for better performance
   ============================================ */

@media (max-width: 768px) {
    /* === SKY: Simplify clouds === */
    [data-theme="sky"] body::before,
    [data-theme="sky"] body::after {
        width: 150px;
        height: 60px;
    }
    
    [data-theme="sky"] .hero-section::before,
    [data-theme="sky"] .hero-section::after {
        display: none; /* Hide sun and bird on mobile */
    }

    /* === SYNTHWAVE: Reduce grid complexity === */
    [data-theme="synthwave"] body::before {
        height: 30%; /* Smaller grid */
    }
    
    [data-theme="synthwave"] body::after {
        width: 120px;
        height: 120px;
    }

    /* === CAMO: Simpler pattern === */
    [data-theme="camo"] .hero-section::after,
    [data-theme="camo"] .hero-section::before {
        display: none; /* Hide scope crosshair on mobile */
    }

    /* === OCEAN: Fewer bubbles === */
    [data-theme="ocean"] .hero-section::before,
    [data-theme="ocean"] .hero-section::after {
        display: none; /* Hide extra bubbles */
    }

    /* === BARBIE: Simplify sparkles === */
    [data-theme="barbie"] body::before,
    [data-theme="barbie"] body::after {
        display: none; /* Hide floating sparkles */
    }

    /* === RIVENDELL: Simplify effects === */
    [data-theme="rivendell"] body::before {
        display: none; /* Hide rotating light rays */
    }
    
    [data-theme="rivendell"] .hero-section::after {
        display: none; /* Hide falling leaf */
    }

    /* === PIP-BOY: Simplify UI === */
    [data-theme="pipboy"] .hero-section::before,
    [data-theme="pipboy"] .hero-section::after {
        display: none; /* Hide VAULT-TEC header */
    }

    /* === MATRIX: Canvas handles its own responsive === */
    #matrix-rain-canvas {
        opacity: 0.5; /* Lighter on mobile for readability */
    }
}

/* === VERY SMALL SCREENS: Disable most animations === */
@media (max-width: 375px) {
    [data-theme="sky"] body::before,
    [data-theme="sky"] body::after,
    [data-theme="synthwave"] body::before,
    [data-theme="ocean"] body::before {
        animation: none;
    }
    
    /* Ensure text remains readable */
    [data-theme="sky"] h1,
    [data-theme="sky"] h2,
    [data-theme="synthwave"] h1,
    [data-theme="synthwave"] h2,
    [data-theme="ocean"] h1,
    [data-theme="ocean"] h2 {
        text-shadow: none;
    }
}
